<html>
<head>
<title>BrightWave Trigeer Send</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
		<h1>Bright wave</h1>
		<div>
			<p>Enter the Email Address: <p>
				<input type="text" id="email" name="email">
		<div>
		<button>Click for trigger</button>

	<script>
		 $(document).ready(function(){
		 debugger;
		 
		 //alert("hello");

		 var d1={
					clientId:"kzbpntd5lnhmh2bcr7pwdi68",
					clientSecret:"yyBpsRWU3HsdV6FLq6YAwlsq"
		 };

		  var token
		 $.ajax({
		 
		 url:"https://auth.exacttargetapis.com/v1/requestToken",
		 method:"post",
		 data:d1,
		 dataType:"json",
		 cache:false,
		 async:false,
		 success:function(result){
		 debugger;
		token= result.accessToken
		 },
		 error:function(){
		 console.log("error");
		 } 

		 });
		$("button").click(function(){
		   var d2=$("#email").val();//Value of the text box 
		 $.ajax({
		 
			url: ' https://www.exacttargetapis.com/messaging/v1/messageDefinitionSends/key:Subscriber_2/send',
		  type: 'POST',
		 data: {
			   "To": {
				"Address": d2,
				"SubscriberKey": d2,
				
			},
				
		   
		},
		 dataType: 'json',	
		 async: false,
		  beforeSend : function( xhr ) {
				xhr.setRequestHeader('Authorization', 'Bearer ' + token);
			},
		 success:function(result,status){
		 alert("Email has been triggered");
		 console.log(result);
		 },
		 error:function(res){
		 alert("Error");
		 
		 } 

		 });
		  }); 
		 });
 </script>



</body>




</html>
